<div class="chat-container">
  <div *ngIf="!userName" class="login-screen" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; padding: 20px;">
    <h2 style="letter-spacing: 5px; font-weight: 300; font-size: 1rem; margin-bottom: 20px;">INITIATE PROTOCOL</h2>
    <div class="input-area" style="width: 100%; max-width: 300px;">
      <input [(ngModel)]="nameInput" placeholder="Identity..." (keyup.enter)="setUserName()" autocomplete="off">
      <button (click)="setUserName()">➔</button>
    </div>
  </div>

  <ng-container *ngIf="userName">
    <div class="header">
      <span>{{ userName }} // ACTIVE</span>
      <span>SECURE_NODE</span>
    </div>

    <div class="messages-list" #scrollMe>
      <div *ngFor="let msg of messages" [class]="msg.user === userName ? 'message-item me' : 'message-item other'">
        <span class="user-label" style="font-size: 0.6rem; margin-bottom: 4px; opacity: 0.5;">{{ msg.user }}</span>
        <div class="message-text">{{ msg.text }}</div>
        
        <div class="status-container" *ngIf="msg.user === userName">
          <span class="status-text">{{ seenMessages.has(msg.id) ? '● SYNCED' : '○ UPLINKED' }}</span>
        </div>
      </div>
    </div>

    <div class="input-wrapper">
      <div class="input-area">
        <input [(ngModel)]="newMessage" placeholder="Type message..." (keyup.enter)="send()" autocomplete="off">
        <button (click)="send()">▲</button>
      </div>
    </div>
  </ng-container>
</div>